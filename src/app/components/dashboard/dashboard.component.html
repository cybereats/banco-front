<div class="dashboard-container">
  <header class="dashboard-header">
    <div class="header-content">
      <div class="header-left">
        <div class="logo-small">
          <div class="logo-icon">‚Ç°</div>
          <span>CyberBank</span>
        </div>
      </div>
      <div class="header-right">
        <span class="welcome-text">Hola, {{ userName() }}!</span>
        <button class="btn-logout" (click)="logout()">Cerrar Sesi√≥n</button>
      </div>
    </div>
  </header>

  <main class="dashboard-content">
    <section class="balance-section">
      <div class="balance-card">
        <h2>Saldo Total</h2>
        <div class="balance-amount">{{ getTotalBalance().toLocaleString('es-ES', {minimumFractionDigits: 2,
          maximumFractionDigits: 2}) }} EUR</div>
        <p class="balance-subtitle">Todas tus cuentas</p>
      </div>
    </section>

    <section class="accounts-section">
      <h2>Mis Cuentas</h2>

      <div *ngIf="loading()" class="loading-state">
        <div class="spinner"></div>
        <p>Cargando tus cuentas...</p>
      </div>

      <div *ngIf="!loading() && accounts().length === 0" class="empty-state">
        <p>No hay cuentas disponibles</p>
      </div>

      <div *ngIf="!loading() && accounts().length > 0" class="accounts-grid">
        <div *ngFor="let account of accounts()" class="account-card" (click)="selectAccount(account)"
          [attr.data-type]="account.tipo">
          <div class="account-header">
            <div class="account-icon">
              <span *ngIf="account.tipo === 'checking'">üí≥</span>
              <span *ngIf="account.tipo === 'savings'">üè¶</span>
            </div>
            <div class="account-title">
              <h3>{{ account.nombre }}</h3>
              <p class="account-number">{{ account.iban }}</p>
            </div>
          </div>

          <div class="account-divider"></div>

          <div class="account-balance">
            <span class="label">Saldo</span>
            <span class="amount">{{ account.saldo.toLocaleString('es-ES', {minimumFractionDigits: 2,
              maximumFractionDigits: 2}) }} {{ account.moneda }}</span>
          </div>

          <div class="account-footer">
            <span class="card-count">{{ account.cards ? account.cards.length : 0 }} tarjeta{{ account.cards &&
              account.cards.length !== 1 ? 's' : ''
              }}</span>
            <span class="arrow">‚Üí</span>
          </div>
        </div>
      </div>
    </section>
  </main>
</div>